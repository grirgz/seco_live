

(
~t = 133/4/60; TempoClock.default.tempo = ~t; // meaning of life
~swing = (1 + (0.06 * Pseg(Pseq([1,-1],inf),1/8)));
ProtoDef(\rdn2, ProtoTemplateDef(\rdn));
ProtoDef(\rdn3, ProtoTemplateDef(\rdn));
~master_simple = {
	ProtoDef(\simpleMixer).play;
	ProtoDef(\rdn).play;
	ProtoDef(\rdn2).play;
	ProtoDef(\rdn3).play;
}
)

	ProtoDef(\rdn).edit;
	ProtoDef(\rdn2).edit;
	ProtoDef(\rdn3).edit;

(
SynthDef(\organ, { arg out=0, amp=0.1, gate=1, pan=0, freq=200;
	var sig;
	sig = Pulse.ar(freq * [1,1.0001, 2/3],mul: [1,1,1/3]).mean;
	sig = RLPF.ar(sig, \lpfr.kr(1.1) * freq, \rq.kr(0.5));
	sig = sig * EnvGen.kr(\adsr.kr(Env.adsr(0.01,0.1,0.8,0.1)), gate, doneAction:2);
	sig = Pan2.ar(sig, pan, amp);
	Out.ar(out, sig);
}).add;
SynthDef(\wavechord, { arg out=0, amp=0.1, gate=1, pan=0, freq=200;
	var sig;
	var sig1, sig2, sig3, sig4, sig5, sig6, sig7, sig8;
	var lfo1, lfo2, lfo3, lfo4, lfo5, lfo6, lfo7, lfo8;
	var env1, env2, env3, env4, env5, env6, env7, env8;
	lfo1 = Duty.kr(1/8/~t * LFNoise1.kr(1/3).range(0.001,4), 0, Dseq([
		1,0,1.5,0.5,0,2,
	],inf)).lag(0.251);
	lfo2 = Duty.kr(1/8/~t * LFNoise1.kr(1/3).range(0.001,4), 0, Dseq([
		1,0,1.5,0.5,0,2,
	],inf)).lag(0.251);
	env1 = EnvGen.kr(Env([1,2,0.71],[Rand(0.1,0.7),Rand(0.4,1.7)]), 1);
	env2 = EnvGen.kr(Env([1,2,0.71],[Rand(0.1,0.7),Rand(0.4,1.7)]), 1);
	sig1 = SinOsc.ar(freq * [1/2,1,2]) * LFNoise1.kr(1/7!3).range(0,1);
	sig1 = sig1.mean;
	sig2 = LFSaw.ar(freq * [1/2,1,2]) * LFNoise1.kr(1/8!3).range(0,1);
	sig2 = sig2.mean;
	sig2 = RLPF.ar(sig2, \lpfr.kr(1.1) * env1 * freq, \rq.kr(0.5));
	sig3 = LFPulse.ar(freq * [1/2,1,2]) * LFNoise1.kr(1/9!3).range(0,1);
	sig3 = sig3.mean;
	sig3 = RLPF.ar(sig3, \lpfr.kr(1.1) * env2 * freq, \rq.kr(0.5));
	sig = SelectX.ar( lfo1, [sig1, sig2, sig3] ) * 1;
	sig = [sig, SelectX.ar( lfo2, [sig1, sig2, sig3] ) * 1];
	sig = sig * EnvGen.kr(\adsr.kr(Env.adsr(0.1,0.1,0.8,1.4)), gate, doneAction:2);
	sig = sig * amp * 2;

	//sig = Pan2.ar(sig, pan, amp);
	Out.ar(out, sig);
}).add;
);


(
Pdef(\part, Pdef(\zed, 
	Ppar([
		Pbind(\out, BusDef(\sendbus1, \audio)) <>
		Ppar([
			Pbind(
				\instrument, \snapkickx,
				\bodyfreqenv, [ Env([261, 54, 21], [0.035, 0.08], curve: \exp) ],
				\dur, 1/12,
				\isRest, Pseq([
					0,0,0, 0,0,0, 0,0,0, 0,0,1,
					0,0,1, 0,0,0, 0,0,0, 0,0,0,
					1,0,0, 0,0,0, 0,0,0, 0,0,0,
					0,0,0, 0,0,1, 0,0,0, 0,0,0,
					0,0,0, 0,0,0, 0,0,0, 0,0,1,
					0,0,1, 0,0,0, 0,0,0, 0,0,0,
					1,0,0, 0,0,0, 0,0,0, 0,0,0,
					0,0,1, 0,0,1, 1,0,0, 1,0,1,
				],inf).coin.not,
				\amp, 0.1,
			),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 6,
				\isRest, Pseq([
					0,0,1,0,0,0, 0,0,0, 1,1,0,
					0,0,0,0,0,1, 0,0,0, 0,0,0,
					0,0,0,0,0,1, 0,0,1,0,1,1,
					0,0,0,0,0,1, 0,0,0, 0,0,0,
			
					0,0,1,0,0,0, 0,0,0, 0,0,0,
					0,0,1,0,0,0, 0,0,0, 1,1,0,
					0,0,0,0,0,0, 0,0,0, 0,0,0,
					0,0,0,0,0,0, 0,1,1,0,1,1,
				],inf).coin.not,
				\sustain, 0.1,
				\gain, 0.2,
				\dur, 1/12,
			)),
			Pbind(
				\instrument, \phyhat3,
				\isRest, Pseq([
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,0, 0,0,0, 0,0,0,
						0,0,0, 0,1,1, 1,0,0, 1,1,0,
				],inf).coin.not,
				\sustain, 0.05,
				\fac1,0.1,
				\dur, 1/12,
				\amp, 0.01 * Pseq([1,0.7],inf),
			),
			Pbind(
				\instrument, \phyhat4,
				\isRest, Pseq([
					Pseq([
						1,0,0,
					],4*7),
					Pseq([
						0,0,0,
					],4*1),
				],inf).coin.not,
				\sustain, 0.1,
				\fac1,0.1,
				\dur, 1/12,
				\amp, 0.02 * Pseq([1,0.7],inf),
			),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 5,
				\isRest, Pseq([
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,0, 1,0,0,1,0,1,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,1, 1,0,0,0,0,1,
				],inf).coin.not,
				\sustain, 0.1,
				\gain, 0.2,
				\dur, 1/12,
			)),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 1,
				\instrument, \playersec_hlpf,
				\hpfmix, 1,
				\hpf, Pseq([
					1000,
					1000,
					100,
				],inf),
				\isRest, Pseq([
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,0,0,1, 0,0,1,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,0,0,0,0, 0,0,0,1,0,1,
				],inf).coin.not,
				\sustain, 0.07,
				\speed, Pseq([
					1,0.99,
				],inf),
				\gain, 0.1 * Pseq([
					1,1,2, 1,1,2,  1,1,1, 2,1,2,
			
				],inf)/2,
				\dur, 1/12,
			)),
		]),
		Pbind(
			\instrument, \basicbass,
			\lpf, 1000,
			\lpf, ~pmodenv.(Pseq([1000,200,100,400],inf), Pwhite(1,8,inf)),
			\note, Pseq([
				Pser([
					0,0,1,
					0,0,1,
				],3*6),
				Pser([
					0,0,1,
					0,0,1,
				],6)+3-12+7,
			],inf),
			\octave, 3,
			\dur, 1/12,
			\legato, Pseq([
				3,0,0, 1,0,1,
				3,0,0, 0,0,0,
				1,0,1, 1,0,1,
			],inf),
			\isRest, Pfunc({ arg ev; ev[\legato] <= 0 }),
			\amp, 0.1,
			\out, BusDef(\sendbus3, \audio),
		),
		Pbind(
			\instrument, \organ,
			//\out, BusDef(\fx1, \audio),
			\note, Pseq([
				Pser([
					[0,0,0],
					[0,0,-12],
					[0,0,-12],
					[12,12,0],
					[0,0,-12],
					[0,0,0],
				],12*2)+
				Pseq([
					[0,3,7]+0,
					[0,3,7]+0,
					[0,3,7]+0,
					[0,3,7]+3,
				],inf).stutter(6*1),
			],inf),
			\sustain, Pseq([
				0.01,0.01,0.001, 0.04,0.01,0.001,
				0.01,0.01,0.021, 0.01,0.01,0.001,
				0.01,0.01,0.001, 0.04,0.01,0.01,
			],inf),
			\isRest, Pseq([
				0,0,0, 1,0,0, 0,0,1, 1,0,0,
				0,0,0, 1,0,1, 0,0,0, 1,0,0,
				1,0,0, 1,0,1, 0,0,1, 1,0,1,
				0,0,1, 1,0,0, 0,0,0, 1,0,1,
				0,0,0, 1,0,0, 0,0,1, 1,0,0,
				0,0,0, 1,0,1, 0,0,0, 1,0,0,
				1,0,0, 1,0,1, 0,0,1, 1,0,1,
				0,0,1, 1,0,0, 0,0,1, 0,0,1,
			],inf).coin.not,
			\dur, 1/12,
			\amp, 0.1 * Pseq([
				1
			],inf),
			\out, BusDef(\sendbus2, \audio),
		),
		
	])
)).play;
)


(
Pdef(\part, Pdef(\zed, 
	Ppar([
		Pbind(\out, BusDef(\sendbus1, \audio)) <>
		Ppar([
			Pbind(
				\instrument, \snapkickx,
				\bodyfreqenv, [ Env([261, 54, 21], [0.035, 0.08], curve: \exp) ],
				\dur, 1/12,
				\isRest, Pseq([
					0,0,0, 0,0,0, 0,0,0, 0,0,1,
					0,0,1, 0,0,0, 0,0,0, 0,0,0,
					1,0,0, 0,0,0, 0,0,0, 0,0,0,
					0,0,0, 0,0,1, 0,0,0, 0,0,0,
					0,0,0, 0,0,0, 0,0,0, 0,0,1,
					0,0,1, 0,0,0, 0,0,0, 0,0,0,
					1,0,0, 0,0,0, 0,0,0, 0,0,0,
					0,0,1, 0,0,1, 1,0,0, 1,0,1,
				],inf).coin.not,
				\amp, 0.1,
			),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 6,
				\isRest, Pseq([
					0,0,1,0,0,0, 0,0,0, 1,1,0,
					0,0,0,0,0,1, 0,0,0, 0,0,0,
					0,0,0,0,0,1, 0,0,1,0,1,1,
					0,0,0,0,0,1, 0,0,0, 0,0,0,
			
					0,0,1,0,0,0, 0,0,0, 0,0,0,
					0,0,1,0,0,0, 0,0,0, 1,1,0,
					0,0,0,0,0,0, 0,0,0, 0,0,0,
					0,0,0,0,0,0, 0,1,1,0,1,1,
				],inf).coin.not,
				\sustain, 0.1,
				\gain, 0.2,
				\dur, 1/12,
			)),
			Pbind(
				\instrument, \phyhat3,
				\isRest, Pseq([
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,0, 0,0,0, 0,0,0,
						0,0,0, 0,1,1, 1,0,0, 1,1,0,
				],inf).coin.not,
				\sustain, 0.05,
				\fac1,0.1,
				\dur, 1/12,
				\amp, 0.01 * Pseq([1,0.7],inf),
			),
			Pbind(
				\instrument, \phyhat4,
				\isRest, Pseq([
					Pseq([
						1,0,0,
					],4*7),
					Pseq([
						0,0,0,
					],4*1),
				],inf).coin.not,
				\sustain, 0.1,
				\fac1,0.1,
				\dur, 1/12,
				\amp, 0.02 * Pseq([1,0.7],inf),
			),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 5,
				\isRest, Pseq([
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,0, 1,0,0,1,0,1,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,1, 1,0,0,0,0,1,
				],inf).coin.not,
				\sustain, 0.1,
				\gain, 0.2,
				\dur, 1/12,
			)),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 1,
				\instrument, \playersec_hlpf,
				\hpfmix, 1,
				\hpf, Pseq([
					1000,
					1000,
					100,
				],inf),
				\isRest, Pseq([
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,0,0,1, 0,0,1,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,0,0,0,0, 0,0,0,1,0,1,
				],inf).coin.not,
				\sustain, 0.07,
				\speed, Pseq([
					1,0.99,
				],inf),
				\gain, 0.1 * Pseq([
					1,1,2, 1,1,2,  1,1,1, 2,1,2,
			
				],inf)/2,
				\dur, 1/12,
			)),
		]),
		Pbind(
			\instrument, \basicbass,
			\lpf, 1000,
			\lpf, ~pmodenv.(Pseq([1000,200,100,400],inf), Pwhite(1,8,inf)),
			\note, Pseq([
				Pser([
					0,0,1,
					0,0,1,
				],3*6),
				Pser([
					0,0,1,
					0,0,1,
				],6)+3-12+7,
			],inf),
			\octave, 3,
			\dur, 1/12,
			\legato, Pseq([
				8,0,0, 0,0,0,
				0,0,0, 1,0,0,
				2,0,1, 1,0,0,
				0,0,1, 1,0,0,
				3,0,0, 1,0,1,
				3,0,0, 0,0,1,
				3,0,0, 1,0,0,
				1,0,1, 1,0,1,
			],inf),
			\isRest, Pfunc({ arg ev; ev[\legato] <= 0 }),
			\amp, 0.1,
			\out, BusDef(\sendbus3, \audio),
		),
		Pbind(
			\instrument, \organ,
			//\out, BusDef(\fx1, \audio),
			\note, Pseq([
				Pser([
					[0,0,0],
					[0,0,-12],
					[0,0,-12],
					[12,12,0],
					[0,0,-12],
					[0,0,0],
				],12*2)+
				Pseq([
					[0,3,7]+0,
					[0,3,7]+0,
					[0,3,7]+0,
					[0,3,7]+3,
				],inf).stutter(6*1),
			],inf),
			\sustain, Pseq([
				0.01,0.01,0.001, 0.04,0.01,0.001,
				0.01,0.01,0.021, 0.01,0.01,0.001,
				0.01,0.01,0.001, 0.04,0.01,0.01,
			],inf),
			\isRest, Pseq([
				0,0,0, 1,0,0, 0,0,1, 1,0,0,
				0,0,0, 1,0,1, 0,0,0, 1,0,0,
				1,0,0, 1,0,1, 0,0,1, 1,0,1,
				0,0,1, 1,0,0, 0,0,0, 1,0,1,
				0,0,0, 1,0,0, 0,0,1, 1,0,0,
				0,0,0, 1,0,1, 0,0,0, 1,0,0,
				1,0,0, 1,0,1, 0,0,1, 1,0,1,
				0,0,1, 1,0,0, 0,0,1, 0,0,1,
			],inf).coin.not,
			\dur, 1/12,
			\amp, 0.1 * Pseq([
				1
			],inf),
			\out, BusDef(\sendbus2, \audio),
		),
		Pbind(
			\instrument, \wavechord,
			\note, Pseq([
				0,0,0,6,
				0,0,0,3,
				0,0,0,10-12,
			],inf).stutter(6),
			\legato, 0.4,
			\legato, Pseq([
				1,0,1, 1,0,0,
				1,0,0, 1,0,0,
				4,0,0, 1,0,1,
			],inf)/2,
			\lpfr, Pseg(Pseq([
				1.2,2,0.8,3.5,
			],inf)+0.01,3),
			\rq, 0.5,
			\isRest, Pfunc({ arg ev; ev[\legato] <= 0 }),
			\adsr, Pseq([
				[ Env.adsr(0.01,0.1,0.8,0.01) ],
				[ Env.adsr(0.01,0.1,0.8,0.21) ],
			],inf),
			\octave, Prand([5,6],inf),
			\dur, 1/12,
			\amp, 0.1,
			\out, BusDef(\sendbus2, \audio),
		),
		
	])
)).play;
)



(
~master_simple.();
Pdef(\part, Pdef(\zed, 
	Ppar([
		Pbind(\out, BusDef(\sendbus1, \audio)) <>
		Ppar([
			Pbind(
				\instrument, \snapkickx,
				\bodyfreqenv, [ Env([261, 54, 21], [0.035, 0.08], curve: \exp) ],
				\dur, 1/12,
				\isRest, Pseq([
					0,0,0, 0,0,0, 0,0,0, 0,0,1,
					0,0,1, 0,0,0, 0,0,0, 0,0,0,
					1,0,0, 0,0,0, 0,0,0, 0,0,0,
					0,0,0, 0,0,1, 0,0,0, 0,0,0,
					0,0,0, 0,0,0, 0,0,0, 0,0,1,
					0,0,1, 0,0,0, 0,0,0, 0,0,0,
					1,0,0, 0,0,0, 0,0,0, 0,0,0,
					0,0,1, 0,0,1, 1,0,0, 1,0,1,
				],inf).coin.not,
				\amp, 0.1,
			),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 6,
				\isRest, Pseq([
					0,0,1,0,0,0, 0,0,0, 1,1,0,
					0,0,0,0,0,1, 0,0,0, 0,0,0,
					0,0,0,0,0,1, 0,0,1,0,1,1,
					0,0,0,0,0,1, 0,0,0, 0,0,0,
			
					0,0,1,0,0,0, 0,0,0, 0,0,0,
					0,0,1,0,0,0, 0,0,0, 1,1,0,
					0,0,0,0,0,0, 0,0,0, 0,0,0,
					0,0,0,0,0,0, 0,1,1,0,1,1,
				],inf).coin.not,
				\sustain, 0.1,
				\gain, 0.2,
				\dur, 1/12,
				\isRest, true,
			)),
			Pbind(
				\instrument, \phyhat3,
				\isRest, Pseq([
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,0, 0,0,0, 0,0,0,
						0,0,0, 0,1,1, 1,0,0, 1,1,0,
				],inf).coin.not,
				\sustain, 0.05,
				\fac1,0.1,
				\dur, 1/12,
				\amp, 0.01 * Pseq([1,0.7],inf),
			),
			Pbind(
				\instrument, \phyhat4,
				\isRest, Pseq([
					Pseq([
						1,0,0,
					],4*7),
					Pseq([
						0,0,0,
					],4*1),
				],inf).coin.not,
				\sustain, 0.1,
				\fac1,0.1,
				\dur, 1/12,
				\amp, 0.02 * Pseq([1,0.7],inf),
			),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 1,
				\isRest, Pseq([
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,0, 1,0,0,1,0,1,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,1, 1,0,0,0,0,1,

					0,0,1,0,0,1, 0,0,1,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,0,0,0,0, 0,0,0,1,0,1,
				],inf).coin.not,
				\sustain, 0.1,
				\gain, 0.2,
				\dur, 1/12,
			)),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 5,
				\instrument, \playersec_hlpf,
				\hpfmix, 1,
				\hpf, Pseq([
					1000,
					1000,
					100,
				],inf),
				\isRest, Pseq([
					0,0,0,0,0,0, 1,0,1,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,1, 1,0,0,0,0,1,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 1,0,1,0,0,0,
					0,0,1,0,0,1, 1,0,1,1,0,1,
					0,0,0,1,0,0, 1,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 1,0,1,0,0,0,
					0,0,0,0,0,0, 1,0,0,1,0,1,
				],inf).coin.not,
				\sustain, 0.07,
				\speed, Pseq([
					1,0.99,
				],inf),
				\gain, 0.1 * Pseq([
					1,1,2, 1,1,2,  1,1,1, 2,1,2,
			
				],inf)/2,
				\dur, 1/12,
			)),
		]),
		Pbind(
			\instrument, \basicbass,
			\lpf, 1000,
			\lpf, ~pmodenv.(Pseq([1000,200,100,400],inf), Pwhite(1,8,inf)),
			\note, Pseq([
				Pser([
					0,0,0,
					0,0,0,
				],3*6),
				Pser([
					0,0,0,
					0,0,0,
				],6)+3-12+7,
			],inf),
			\octave, 3,
			\dur, 1/12,
			\legato, Pseq([
				Pseq([

					2,0,0, 0,0,0,
					0,0,0, 1,0,0,
					0,0,1, 0,0,1,
					1,0,1, 1,0,1,

					2,0,0, 0,0,0,
					1,0,0, 1,0,0,
					1,0,1, 1,0,0,
					1,0,1, 1,0,1,

					1,0,1, 2,0,0,
					0,0,0, 0,0,0,
					0,0,0, 1,0,1,
					1,0,1, 1,0,1,

					2,0,0, 0,0,0,
					0,0,0, 0,0,0,
					0,0,0, 0,0,0,
					1,0,1, 1,0,1,

					2,0,0, 0,0,0,
					0,0,0, 0,0,0,
					0,0,0, 0,0,0,
					2,0,0, 1,0,1,

					2,0,0, 0,0,0,
					0,0,0, 0,0,0,
					0,0,0, 0,0,0,
					1,0,1, 1,0,1,
				],inf),



				2,0,0, 1,0,1,
				1,0,1, 1,0,0,
				2,0,0, 1,0,1,
				5,0,0, 0,0,1,

				2,0,0, 1,0,1,
				1,0,1, 1,0,1,
				1,0,1, 1,0,0,
				5,0,0, 0,0,1,

				2,0,0, 1,0,1,
				1,0,0, 1,0,1,
				1,0,1, 1,0,0,
				2,0,0, 2,0,0,
			],inf) * Pseq([1,1,1,1,1/2,1/2,1,1,1,1,1,1,1,2,1,1,1,1/2,1,1,1,1,1],inf),
			\isRest, Pfunc({ arg ev; ev[\legato] <= 0 }),
			\amp, 0.1,
			\out, BusDef(\sendbus3, \audio),
		),
		Pbind(
			\instrument, \organ,
			//\out, BusDef(\fx1, \audio),
			\note, Pseq([
				Pser([
					[0,0,0],
					[0,0,-12],
					[0,0,-12],
					[12,12,0],
					[0,0,-12],
					[0,0,0],
				],12*2)+
				Pseq([
					[0,3,7]+0,
					[0,3,7]+0,
					[0,3,7]+0,
					[0,3,7]+3,
				],inf).stutter(6*1),
			],inf),
			\sustain, Pseq([
				0.01,0.01,0.001, 0.04,0.01,0.001,
				0.01,0.01,0.021, 0.01,0.01,0.001,
				0.01,0.01,0.001, 0.04,0.01,0.01,
			],inf),
			\isRest, Pseq([
				0,0,0, 1,0,0, 0,0,1, 1,0,0,
				0,0,0, 1,0,1, 0,0,0, 1,0,0,
				1,0,0, 1,0,1, 0,0,1, 1,0,1,
				0,0,1, 1,0,0, 0,0,0, 1,0,1,
				0,0,0, 1,0,0, 0,0,1, 1,0,0,
				0,0,0, 1,0,1, 0,0,0, 1,0,0,
				1,0,0, 1,0,1, 0,0,1, 1,0,1,
				0,0,1, 1,0,0, 0,0,1, 0,0,1,
			],inf).coin.not,
			\dur, 1/12,
			\amp, 0.1 * Pseq([
				1
			],inf),
			\out, BusDef(\sendbus2, \audio),
		),
		Pbind(
			\instrument, \wavechord,
			\note, Pseq([
				0,0,0,6,
				0,0,0,3,
				0,0,0,10-12,
			],inf).stutter(6),
			\legato, 0.4,
			\legato, Pseq([
				1,0,1, 1,0,0,
				1,0,0, 1,0,0,
				4,0,0, 1,0,1,
			],inf)/2,
			\lpfr, Pseg(Pseq([
				1.2,2,0.8,3.5,
			],inf)+0.01,3),
			\rq, 0.5,
			\isRest, Pfunc({ arg ev; ev[\legato] <= 0 }),
			\adsr, Pseq([
				[ Env.adsr(0.01,0.1,0.8,0.01) ],
				[ Env.adsr(0.01,0.1,0.8,0.21) ],
			],inf),
			\octave, Prand([5,6],inf),
			\dur, 1/12,
			\amp, 0.1,
			\out, BusDef(\sendbus2, \audio),
		),
		
	])
)).play;
)


(
Pdef(\part, Pdef(\zed, 
	Ppar([
		Pbind(\out, BusDef(\sendbus1, \audio)) <>
		Ppar([
			Pbind(
				\instrument, \snapkickx,
				\bodyfreqenv, [ Env([261, 54, 21], [0.035, 0.08], curve: \exp) ],
				\dur, 1/12,
				\isRest, Pseq([
					0,0,0, 0,0,0, 0,0,0, 0,0,1,
					0,0,1, 0,0,0, 0,0,0, 0,0,0,
					1,0,0, 0,0,0, 0,0,0, 0,0,0,
					0,0,0, 0,0,1, 0,0,0, 0,0,0,
					0,0,0, 0,0,0, 0,0,0, 0,0,1,
					0,0,1, 0,0,0, 0,0,0, 0,0,0,
					1,0,0, 0,0,0, 0,0,0, 0,0,0,
					0,0,1, 0,0,1, 1,0,0, 1,0,1,
				],inf).coin.not,
				\amp, 0.1,
			),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 6,
				\isRest, Pseq([
					0,0,0, 0,0,0,  0,0,0, 0,0,0,
					0,0,0, 0,0,0,  0,0,0, 0,0,0,
					0,0,0, 0,0,0,  0,0,0, 0,0,0,
					0,0,1,0,0,0, 0,0,0, 1,1,0,
					0,0,0,0,0,1, 0,0,0, 0,0,0,
					0,0,0,0,0,1, 0,0,1,0,1,1,
					0,0,0,0,0,1, 0,0,0, 0,0,0,
			
					0,0,0, 0,0,0,  0,0,0, 0,0,0,
					0,0,0, 0,0,0,  0,0,0, 0,0,0,
					0,0,0, 0,0,0,  0,0,0, 0,0,0,
					0,0,1,0,0,0, 0,0,0, 0,0,0,
					0,0,1,0,0,0, 0,0,0, 1,1,0,
					0,0,0,0,0,0, 0,0,0, 0,0,0,
					0,0,0,0,0,0, 0,1,1,0,1,1,
				],inf).coin.not,
				\sustain, 0.1,
				\gain, 0.2,
				\dur, 1/12,
			)),
			Pbind(
				\instrument, \phyhat3,
				\isRest, Pseq([
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,1, 1,0,1, 1,0,1,
						1,1,0, 1,0,1, 1,0,1, 1,0,1,
						1,0,1, 1,0,0, 0,0,0, 0,0,0,
						0,0,0, 0,1,1, 1,0,0, 1,1,0,
				],inf).coin.not,
				\sustain, 0.05,
				\fac1,0.1,
				\dur, 1/12,
				\amp, 0.01 * Pseq([1,0.7],inf),
			),
			Pbind(
				\instrument, \phyhat4,
				\isRest, Pseq([
					Pseq([
						1,0,0,
					],4*7),
					Pseq([
						0,0,0,
					],4*1),
				],inf).coin.not,
				\sustain, 0.1,
				\fac1,0.1,
				\dur, 1/12,
				\amp, 0.02 * Pseq([1,0.7],inf),
			),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 1,
				\isRest, Pseq([
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,0, 1,0,0,1,0,1,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,1, 1,0,0,0,0,1,

					0,0,1,0,0,1, 0,0,1,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 0,0,1,0,0,0,
					0,0,0,0,0,0, 0,0,0,1,0,1,
				],inf).coin.not,
				\sustain, 0.1,
				\gain, 0.2,
				\dur, 1/12,
			)),
			PatKitDef(\rim).asPattern(Pbind(
				\kitIndex, 5,
				\instrument, \playersec_hlpf,
				\hpfmix, 1,
				\hpf, Pseq([
					1000,
					1000,
					100,
				],inf),
				\isRest, Pseq([
					0,0,0,0,0,0, 1,0,1,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,0,
					0,0,0,0,0,0, 1,0,0,0,0,1,
					0,0,1,0,0,1, 1,0,0,0,0,1,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 1,0,1,0,0,0,
					0,0,1,0,0,1, 1,0,1,1,0,1,
					0,0,0,1,0,0, 1,0,1,0,0,0,
					0,0,1,1,0,0, 1,0,0,1,0,1,
					0,0,0,1,0,0, 1,0,1,0,0,0,
					0,0,0,0,0,0, 1,0,0,1,0,1,
				],inf).coin.not,
				\sustain, 0.07,
				\speed, Pseq([
					1,0.99,
				],inf),
				\gain, 0.1 * Pseq([
					1,1,2, 1,1,2,  1,1,1, 2,1,2,
			
				],inf)/2,
				\dur, 1/12,
			)),
		]),
		Pbind(
			\instrument, \basicbass,
			\lpf, 1000,
			\lpf, ~pmodenv.(Pseq([1000,200,100,400],inf), Pwhite(1,8,inf)),
			\note, Pseq([
				Pser([
					0,0,1,
					0,0,1,
				],3*6),
				Pser([
					0,0,1,
					0,0,1,
				],6)+3-12+7,
			],inf),
			\octave, 3,
			\dur, 1/12,
			\legato, Pseq([
				8,0,0, 0,0,0,
				0,0,0, 1,0,0,
				2,0,1, 1,0,0,
				0,0,1, 1,0,0,
				3,0,0, 1,0,1,
				3,0,0, 0,0,1,
				3,0,0, 1,0,0,
				1,0,1, 1,0,1,
			],inf),
			\isRest, Pfunc({ arg ev; ev[\legato] <= 0 }),
			\amp, 0.1,
			\out, BusDef(\sendbus3, \audio),
		),
		Pbind(
			\instrument, \organ,
			//\out, BusDef(\fx1, \audio),
			\note, Pseq([
				Pser([
					[0,0,0],
					[0,0,-12],
					[0,0,-12],
					[12,12,0],
					[0,0,-12],
					[0,0,0],
				],12*2)+
				Pseq([
					[0,3,7]+0,
					[0,3,7]+0,
					[0,3,7]+0,
					[0,3,7]+3,
				],inf).stutter(6*1),
			],inf),
			\sustain, Pseq([
				0.01,0.01,0.001, 0.04,0.01,0.001,
				0.01,0.01,0.021, 0.01,0.01,0.001,
				0.01,0.01,0.001, 0.04,0.01,0.01,
			],inf),
			\isRest, Pseq([
				0,0,0, 0,0,1, 0,0,0, 1,0,0,
				1,0,1, 1,0,1, 1,1,1, 1,0,1,
				1,0,0, 0,0,1, 0,0,0, 1,0,0,
				1,1,1, 1,0,1, 1,0,1, 1,0,1,
				0,0,0, 0,0,1, 0,0,0, 1,0,0,
				0,0,0, 0,0,1, 1,0,0, 1,1,0,
				0,0,0, 1,0,1, 0,0,0, 1,0,0,
				0,0,0, 0,0,1, 0,0,0, 1,0,0,
			],inf).coin.not,
			\dur, 1/12,
			\amp, 0.1 * Pseq([
				1
			],inf),
			\out, BusDef(\sendbus2, \audio),
		),
		Pbind(
			\instrument, \wavechord,
			\note, Pseq([
				0,0,0,6,
				0,0,0,3,
				0,0,0,10-12,
			],inf).stutter(1),
			\legato, 0.4,
			\legato, Pseq([
				Pser([
					0,1,0,1,1,0,
					0,0,0, 0,0,0,
					0,1,0,0,1,1,
					0,0,0, 0,0,0,
					0,1,0,0,1,1,
				],12*3),
				Pseq([
					Pseq([
						1,1,1, 1,1,1,
					],1)/4,
					Pseq([
						0,0,0, 0,0,0,
					],3)/4,
				],2),
			],inf)/2,
			\lpfr, Pseg(Pseq([
				1.2,2,0.8,3.5,
			],inf)+0.01,3),
			\rq, 0.5,
			\isRest, Pfunc({ arg ev; ev[\legato] <= 0 }),
			\adsr, Pseq([
				[ Env.adsr(0.01,0.1,0.8,0.01) ],
				[ Env.adsr(0.01,0.1,0.8,0.21) ],
			],inf),
			\octave, Prand([5,6],inf),
			\dur, 1/12,
			\amp, 0.1,
			\out, BusDef(\sendbus2, \audio),
		),
		
	])
)).play;
)
