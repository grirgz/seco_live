
(
r = \r;
Pdef(\fadrum, 
	Ppar([
		PatKitDef(\sample1).asPattern(Pbind(
			\kitIndex, 0,
			\isRest, Pseq([
				1,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,1,
				1,0,0,0, 1,0,0,0,
				0,0,0,0, 1,0,0,0,
				1,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,1,
				1,0,0,1, 1,0,0,0,
				0,0,0,1, 1,0,0,1,

				1,0,0,0, 0,0,0,0,
				0,0,0,0, 1,0,0,1,
				1,0,0,0, 1,0,0,0,
				0,0,0,0, 1,0,0,0,
				1,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,1,
				1,0,0,0, 1,0,0,0,
				0,0,0,0, 0,0,0,1,
			],inf).coin.not,
			\sustain, 0.171,
			\dur, 1/8,
			\dur, Pkey(\dur) * (1 + (0.60 * Pseq([-1,1],inf))),
			\gain, 1/2,
			\amp, 0.1,
		)),
		PatKitDef(\sample1).asPattern(Pbind(
			\kitIndex, 4,
			\isRest, Pseq([
				0,0,0,0, 0,0,0,0,
				1,0,0,0, 0,0,0,0,
			],inf).coin.not,
			\sustain, Pseq([1,4],inf).stutter(16) * 0.111,
			\dur, 1/8,
			\gain, 1/2,
			\amp, 0.1,
		)),
		PatKitDef(\sample1).asPattern(Pbind(
			\kitIndex, 5,
			\isRest, Pseq([
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				1,0,0,0, 0,0,1,0,

				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,1,0, 0,0,0,0,
				1,0,0,0, 0,0,0,0,
			],inf).coin.not,
			\sustain, 0.171,
			\dur, 1/8,
			\gain, 1/3,
			\amp, 0.1,
		)),
		PatKitDef(\sample1).asPattern(Pbind(
			\kitIndex, 0,
			\instrument, \playersec_hlpf,
			\bufnum, BufDef.mono('heavy/kick1.flac'),
			\bufnum, BufDef('heavy/kick1.flac'),
			\bufnum, BufDef(\amen),
			\isRest, Pseq([
				0,1, 1,1,
			],inf).coin.not,
			\pos, ~pmodenv.(Pseq([ 0,0.4042,1.001,0.002]/10,inf)+0.04+0.38, Pseq([2].normalizeSum,inf)),
			\grate, 100,
			\isRest, Pseq([
				0,1,0,1,
			],inf).coin.not,
			\lpmix, 1,
			\hpmix, 1,
			\lpf, 9300,
			\hpf, 4300,
			\isRest, Pseq([
				1,0.41,1,0.41,
				1,0.41,1,0.41,
				1,0.41,1,0.41,
				1,0.61,1,0.61,

				1,0.41,1,0.41,
				1,0.81,1,0.81,
				1,0.41,1,0.81,
				1,0.41,1,0.41,
				//1,1,1,1,
			],inf).coin.not,
			//\grate, ~pmodenv.(Pseq([0,0.2,0.3,0.6],inf)*1317, 1/4),
			\sustain, 0.11/1 * Pseq([0.5,1],inf).stutter(1) * Prand([1,1/2,0.7,1.5],inf),
			\speed, 1.2,
			\dur, 1/4,
			\dur, Pkey(\dur) * (1 + (-0.15 * Pseq([-1,1],inf))),
			\gain, 0.15,
			\adsr, Prand([
				[ Env.adsr(0.01,0.1,0.8,0.1) ],
				[ Env.adsr(0.01,0.1,0.8,0.1) ],
				[ Env.adsr(0.01,0.1,0.8,0.2) ],
				[ Env.adsr(0.01,0.1,0.8,0.051) ],
				[ Env.adsr(0.01,0.1,0.8,0.01) ],
				[ Env.adsr(0.1,0.1,0.8,0.01) ],
			],inf),
			\gain, Pkey(\gain) * Pseq([
				0.8,
				0.2,
			],inf).stutter(1),
			\amp, 0.1,
		)),
	])
).play;
)


(
r = \r;
Pdef(\fadrum, 
	Ppar([
		PatKitDef(\sample1).asPattern(Pbind(
			\kitIndex, 0,
			\isRest, Pseq([
				1,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,1,
				1,0,0,0, 1,0,0,0,
				0,0,0,0, 1,0,0,0,
				1,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,1,
				1,0,0,1, 1,0,0,0,
				0,0,0,1, 1,0,0,1,

				1,0,0,0, 0,0,0,0,
				0,0,0,0, 1,0,0,1,
				1,0,0,0, 1,0,0,0,
				0,0,0,0, 1,0,0,0,
				1,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,1,
				1,0,0,0, 1,0,0,0,
				0,0,0,0, 0,0,0,1,
			],inf).coin.not,
			\sustain, 0.171,
			\dur, 1/8,
			\dur, Pkey(\dur) * (1 + (0.60 * Pseq([-1,1],inf))),
			\gain, 1/2,
			\amp, 0.1,
		)),
		PatKitDef(\sample1).asPattern(Pbind(
			\kitIndex, 4,
			\isRest, Pseq([
				0,0,0,0, 0,0,0,0,
				1,0,0,0, 0,0,0,0,
			],inf).coin.not,
			\sustain, Pseq([1,4],inf).stutter(16) * 0.111,
			\dur, 1/8,
			\gain, 1/2,
			\amp, 0.1,
		)),
		PatKitDef(\sample1).asPattern(Pbind(
			\kitIndex, 5,
			\isRest, Pseq([
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				1,0,0,0, 0,0,1,0,

				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,0,0, 0,0,0,0,
				0,0,1,0, 0,0,0,0,
				1,0,0,0, 0,0,0,0,
			],inf).coin.not,
			\sustain, 0.171,
			\dur, 1/8,
			\gain, 1/3,
			\amp, 0.1,
		)),
		PatKitDef(\sample1).asPattern(Pbind(
			\kitIndex, 0,
				\instrument, \playersec_hlpf,
			\isRest, Pseq({[
				1,1,1,1, 1,1,1,1,
				1,0,1,0, 1,0,1,0,
				1,0,0,0, 1,0,0,0,
				0,0,1,0, 0,0,1,0,
			].clump(8).choose}.dup(8).flat,inf).coin.not,
				\bufnum, BufDef(\amen),
				\isRest, Pseq([
					0,0,0,0, 0,0,0,0,
					1,0,0,0, 0,0,0,0,

					0,0,0,0, 0,0,0,0,
					0,0,0,0, 0,0,0,0,

					0,0,0,0, 0,0,0,0,
					0,0,0,0, 0,0,0,0,

					0,0,0,1, 0,0,0,0,
					0,0,0,0, 0,0,0,0,
				],inf).coin.not,
				\pos, ~pmodenv.(Pseq([ 0,0.4042,1.001,0.002]/10,inf)+0.04+0.38, Pseq([2].normalizeSum,inf)),
				\pos, 0.45,
				\speed, 1.2,
			\sustain, 0.1,
				\lpmix, 1,
				\hpmix, 1,
				\lpf, 9300,
				\hpf, 4300,
				\gain, 0.15,
				\adsr, Prand([
					[ Env.adsr(0.01,0.1,0.8,0.01) ],
				],inf),
				\sustain, 0.1,
				\gain, Pkey(\gain) * Pseq([
					0.8, 0.2,
				],inf).stutter(1),
			\lag, 1/8,
			\dur, 1/4,
			\amp, 0.1,
		)),
		Pseq([
			Pfindur(8,Pdef(\firsthat, PatKitDef(\sample1).asPattern(Pbind(
				\kitIndex, 0,
				\instrument, \playersec_hlpf,
				\bufnum, BufDef.mono('heavy/kick1.flac'),
				\bufnum, BufDef('heavy/kick1.flac'),
				\bufnum, BufDef(\amen),
				\isRest, Pseq([
					0,1, 1,1,
				],inf).coin.not,
				\pos, ~pmodenv.(Pseq([ 0,0.4042,1.001,0.002]/10,inf)+0.04+0.38, Pseq([2].normalizeSum,inf)),
				//\pos, 0.49,
				\grate, 100,
				\isRest, Pseq([
					0,1,0,1,
				],inf).coin.not,
				\lpmix, 1,
				\hpmix, 1,
				\lpf, 9300,
				\hpf, 4300,
				\isRest, Pseq([
					1,0.41,1,0.41,
					1,0.41,1,0.41,
					1,0.41,1,0.41,
					1,0.61,1,0.61,

					1,0.41,1,0.41,
					1,0.81,1,0.81,
					1,0.41,1,0.81,
					1,0.41,1,0.41,
					//1,1,1,1,
				],inf).coin.not,
				//\grate, ~pmodenv.(Pseq([0,0.2,0.3,0.6],inf)*1317, 1/4),
				\sustain, 0.11/1 * Pseq([0.5,1],inf).stutter(1) * Prand([1,1/2,0.7,1.5],inf),
				\speed, 1.2,
				\dur, 1/4,
				\dur, Pkey(\dur) * (1 + (-0.15 * Pseq([-1,1],inf))),
				\gain, 0.15,
				\adsr, Prand([
					[ Env.adsr(0.01,0.1,0.8,0.1) ],
					[ Env.adsr(0.01,0.1,0.8,0.1) ],
					[ Env.adsr(0.01,0.1,0.8,0.2) ],
					[ Env.adsr(0.01,0.1,0.8,0.051) ],
					[ Env.adsr(0.01,0.1,0.8,0.01) ],
					[ Env.adsr(0.1,0.1,0.8,0.01) ],
				],inf),
				\sustain, 0.1,
				\gain, Pkey(\gain) * Pseq([
					0.8, 0.2,
				],inf).stutter(1),
				\amp, 0.1,
			)))),
			Pfindur(4,PatKitDef(\sample1).asPattern(Pbind(
				\kitIndex, 0,
				\instrument, \playersec_hlpf,
				\bufnum, BufDef.mono('heavy/kick1.flac'),
				\bufnum, BufDef('heavy/kick1.flac'),
				\bufnum, BufDef(\amen),
				\isRest, Pseq([
					0,1, 1,1,
				],inf).coin.not,
				//\pos, ~pmodenv.(Pseq([ 0,0.4042,1.001,0.002]/10,inf)+0.04+0.38, Pseq([2].normalizeSum,inf)),
				\pos, 0.49,
				\pos, ~pmodenv.(Pseq([ 0,0.4042,1.001,0.002]/10,inf)+0.04+0.38, Pseq([2].normalizeSum,inf)),
				\grate, 100,
				\isRest, Pseq([
					0,1,0,1,
				],inf).coin.not,
				\lpmix, 1,
				\hpmix, 1,
				\lpf, 9300,
				\hpf, 4300,
				\isRest, Pseq([
					1,0.41,1,0.41,
					1,0.41,1,0.41,
					1,0.41,1,0.41,
					1,0.61,1,0.61,

					1,0.41,1,0.41,
					1,0.81,1,0.81,
					1,0.41,1,0.81,
					1,0.41,1,0.41,
					//1,1,1,1,
				],inf).coin.not,
				//\grate, ~pmodenv.(Pseq([0,0.2,0.3,0.6],inf)*1317, 1/4),
				\sustain, 0.11/1 * Pseq([0.5,1],inf).stutter(1) * Prand([1,1/2,0.7,1.5],inf),
				\speed, 1.2,
				\dur, 1/4,
				\dur, Pkey(\dur) * (1 + (-0.15 * Pseq([-1,1],inf))),
				\adsr, Prand([
					[ Env.adsr(0.01,0.1,0.8,0.1) ],
					[ Env.adsr(0.01,0.1,0.8,0.1) ],
					[ Env.adsr(0.01,0.1,0.8,0.2) ],
					[ Env.adsr(0.01,0.1,0.8,0.051) ],
					[ Env.adsr(0.01,0.1,0.8,0.01) ],
					[ Env.adsr(0.1,0.1,0.8,0.01) ],
				],inf),
				\adsr, Prand([
					[ Env.adsr(0.01,0.1,0.8,0.4) ],
				],inf),
				\sustain, 0.1,
				\gain, 0.20,
				\gain, Pkey(\gain) * Pseq([
					0.8, 0.2, 0.8, 0.2, 0.8, 0.8, 0.2, 0.2,
					0.8, 0.8, 0.2, 0.2, 0.8, 0.8, 0.7, 0.2,
				],inf).stutter(1),
				\isRest, Pseq([
					1,0,1,1, 0,1,1,0,
					0,1,1,0, 0,0,1,0,
				],inf).coin.not,
				\amp, 0.1,
			))),
			Pfindur(4, Pbind(
				\isRest, Pseq([
					1,1,1,1, 1,1,1,1,
					1,1,1,1, 0,0,0,0,
				],inf).coin.not,
			) <> Pdef(\firsthat)),
		],inf),
	])
).play;
)
